<time>April 4, 2013</time> 

Getting started
--------

After building this blog, I thought it would be great to open source a project that I'm working on. This is an introduction in creating our own Backbone extension and starts with Jasmine.

<iframe src="http://player.vimeo.com/video/63251093" width="700" height="393" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>

###This chapter: Backbone.Modal###

In a nutshell: modals in web apps are really useful. They're popular because it gives your app a native feel and it can improve the user experience, because you don't leave the page while still focussing on something else.

So what are we up to? Shipment uses an extension for Backbone that makes it easy to create all kinds of modals. Creating a modal with multiple tabs, that switches from one (Backbone) view to another. It handles all the events that you would expect from a modal, for example: press esc or click outside the modal to close and enter to submit.

The next series of posts will cover how we'll build a Backbone extension: **[Backbone.Modal](https://github.com/davidvanleeuwen/backbone.modal)**. I've created the repo with Grunt (love it) and added Jasmine to it, [check out the current code](https://github.com/davidvanleeuwen/backbone.modal).

###What's Jasmine?###

As it won't be just a simple dialog modal, we want to make sure everyhing works correctly. And instead of just building it, it would be smarter to write down it's functionality before we start writing any code.

[Jasmine](http://pivotal.github.com/jasmine/) is a testing framework for your Javascript, built by the guys at Pivotal Labs. They call it behavior-driven development, because you write your tests with "What should happen when x happens?". 

It's a different kind of workflow, but is easy to get used to. It starts with "what should this do?", describe it in a test like: "it should do..." and the test fails. This is because we haven't written any code yet (besides the test itself). So you'll start fixing it by writing the code. Repeat this and you'll have fully functional code that is tested.

### The spec ###

Let's write down the specification for Backbone.Modal. This is just my first thought and is clearly not finished yet. But let's have a look:

<code data-gist="https://gist.github.com/5293941.json"></code>

Easy peasy. `Describe` the tests, what `it` should do and there you go. The only thing you're probably wondering is the `#` in there. This is just a convention to use when you're describing a method from your code.

When you run the code, by using `grunt watch` from your terminal, it'll open up the spec runner. This is generated by Jasmine that shows which tests are passing and which are failing.

<img src="/images/jasmine_tests.png" alt="Backbone Modal - Jasmine" />

As you can see all tests are passing right now. That's because every test is a function. CoffeeScript will by default add a return at the end of every function. Let's write the code that actually evaluates the test.

### Getting things done ###

So one by one we'll write down what we expect every piece of code (spec) to do. Every spec returns false or true to pass the test. By using Jasmine's convience method `expect()`, it makes it easy to test every result you want.

<code data-gist="https://gist.github.com/5306080.json"></code>

The methods `beforeEach` and `afterEach` are methods that Jasmine runs before and after each spec. So we'll define a `modal` class and create an instance. Because that's what we're testing here...

On the [Jasmine site](http://pivotal.github.com/jasmine/) you find all expectations, like `toBeDefined` and `toThrow` which we're using in this example.

### Now what? ###

With every spec I started writing the [code for this](https://github.com/davidvanleeuwen/backbone.modal/blob/master/src/backbone.modal.coffee):

<code data-gist="https://gist.github.com/5309171.json"></code>

You'll see that I've created the methods to pass the above tests. If you've read the tests what `it` should do, I don't need to explain what's happening in this code. The extension isn't really useful yet, but the next couple of weeks this extension will be more complete and useful for your projects too.

My plan for this article was to write all Jasmine tests and explain every bit of it. But I came to the conclusion that writing every test, will force me to write the whole extension. This article scratches the surface of Jasmine and is just the beginning.

### Next up ###

We'll be writing more core functionality in the next article. As you see in the Shipment modals, there is also a lot of styling happening. My colleague and friend [Floris](https://twitter.com/fverloop) will help me with setting this up.  Please let me know what you think of Jasmine, Backbone.Modal or my blog in general by tweeting to [@davidvanleeuwen](https://twitter.com/davidvanleeuwen).

